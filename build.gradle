plugins {
	id 'org.springframework.boot' version '2.3.0.RELEASE'
	id 'io.spring.dependency-management' version '1.0.11.RELEASE'
	id 'java'
	// plugins to generate OpenAPI
	id "com.github.johnrengelman.processes" version "0.5.0"
	id "org.springdoc.openapi-gradle-plugin" version "1.3.0"

	// generate client from specification
	id "org.openapi.generator" version "5.0.1"
}

group = 'io.mart'
sourceCompatibility = '1.8'

repositories {
	mavenCentral()
}

dependencies {
	implementation 'org.springframework.boot:spring-boot-starter-web'
	implementation 'org.springdoc:springdoc-openapi-ui:1.5.3'
	testImplementation 'org.springframework.boot:spring-boot-starter-test'
}

test {
	useJUnitPlatform()
}


// task for generating client
openApiGenerate {
	generatorName = "java"
	inputSpec = "$buildDir/openapi.json".toString()
	outputDir = "$buildDir/generated/client".toString()
	library = "rest-assured"
	apiPackage = "org.openapi.example.api"
	invokerPackage = "org.openapi.example.invoker"
	modelPackage = "org.openapi.example.model"
	configOptions = [
			dateLibrary: "java8"
	]
}
